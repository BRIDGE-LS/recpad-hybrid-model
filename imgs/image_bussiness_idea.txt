A imagem tenta comunicar visualmente os principais componentes do classificador baseado em ensemble com EfficientNet, desde a entrada (WSI) at√© a sa√≠da interpret√°vel para uso cl√≠nico. 

Da esquerda para a direita temos:

---

## üß™ 1. Entrada: Whole Slide Image (WSI)

* A imagem do lado esquerdo representa uma **l√¢mina histopatol√≥gica digitalizada**.
* Uma **regi√£o de interesse (ROI)** √© destacada com zoom.
* Dessa ROI s√£o extra√≠dos **patches de imagem menores (224√ó224, 300√ó300 ou 380√ó380)** ‚Äî como √© usual em pipelines de histopatologia digital (Echle et al., 2021; Campanella et al., 2019).

---

## üß± 2. Prepara√ß√£o dos Patches

* Os **patches extra√≠dos** s√£o empilhados em batches e enviados para processamento por modelos EfficientNet, como no esquema mostrado abaixo.
* Cada patch representa uma **unidade morfol√≥gica** (p. ex., grupo glandular, tecido inflamat√≥rio, stroma) que ser√° classificada individualmente.

---

## üß† 3. Classificador EfficientNet

* O bloco azul central mostra a **fun√ß√£o `get_model(model_name)`** (do `model.py`) que configura dinamicamente uma inst√¢ncia do modelo desejado (B0, B3 ou B4).
* Esse bloco √© parametrizado com:
  * `input_size`: diferente para cada variante do EfficientNet
  * `dropout`: ajustado conforme complexidade morfol√≥gica (0.25 para modelos leves, 0.4 para profundos)

* Os **tr√™s modelos** s√£o executados paralelamente, e cada um processa os mesmos patches com diferentes capacidades de abstra√ß√£o morfol√≥gica:
  * B0: baixa complexidade (menos par√¢metros)
  * B3: capacidade intermedi√°ria
  * B4: mais profundo, usado para tecidos mais heterog√™neos (como STR e TUM)

---

## üß™ 4. Ensemble das Sa√≠das

* As sa√≠das **softmax de cada modelo** s√£o combinadas no ensemble.
* A imagem atual representa **soft voting ponderado**, mas no sistema tamb√©m ser√° poss√≠vel usar **stacked generalization**, como proposto por Wolpert (1992).

---

## üìä 5. Sa√≠da para o Patologista

* O gr√°fico de pizza do lado direito representa a **predi√ß√£o final do ensemble** como a **propor√ß√£o de tecidos** presentes em uma WSI.
* Por exemplo:

  * **57.4% Tumor**
  * **24.2% Stroma**
  * **9.2% Complex Stroma**
  * Outros tecidos minorit√°rios tamb√©m aparecem (debris, adipose, mucosa etc.)

### üß¨ Interpreta√ß√£o cl√≠nica:

* Isso fornece uma **leitura quantitativa e interpret√°vel** da composi√ß√£o do microambiente tumoral, √∫til para:

  * Classifica√ß√£o de subtipos tumorais
  * Predi√ß√£o de resposta √† imunoterapia (Liang et al., 2023)
  * Suporte √† decis√£o diagn√≥stica

---

## üìö Justificativas e Refer√™ncias

| Elemento Visual                   | Justificativa                                                  | Fonte                            |
| --------------------------------- | -------------------------------------------------------------- | -------------------------------- |
| Extra√ß√£o de patches               | Pr√°tica padr√£o em WSI para reduzir custo e aumentar amostragem | Tellez et al., 2019; Campanella  |
| Uso de EfficientNet B0‚ÄìB4         | Balanceamento entre capacidade e efici√™ncia                    | Tan & Le, 2019                   |
| Diferentes resolu√ß√µes e dropout   | Adaptados √† complexidade morfol√≥gica por modelo                | Liang et al., 2023; Echle et al. |
| Soft Voting                       | Estrat√©gia de ensemble simples e robusta                       | Kuncheva, 2004                   |
| Output como percentual por classe | Gera√ß√£o de mapa morfol√≥gico da WSI com aplica√ß√µes cl√≠nicas     | Wang et al., 2022                |

---

